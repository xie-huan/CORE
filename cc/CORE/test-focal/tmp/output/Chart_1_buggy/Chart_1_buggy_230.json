{"test_class": {"identifier": "StackedBarRenderer3DTests", "superclass": "extends TestCase", "interfaces": "", "fields": [], "file": "tests/org/jfree/chart/renderer/category/junit/StackedBarRenderer3DTests.java"}, "test_case": {"identifier": "testCreateStackedValueList1a", "parameters": "()", "modifiers": "public", "return": "void", "body": "public void testCreateStackedValueList1a() {\n        DefaultCategoryDataset d = new DefaultCategoryDataset();\n        d.addValue(1.0, \"s0\", \"c0\");\n        d.addValue(1.1, \"s1\", \"c0\");\n        MyRenderer r = new MyRenderer();\n        List l = r.createStackedValueList(d, \"c0\", new int[] { 0, 1 }, 0.0,\n                false);\n        assertEquals(3, l.size());\n        assertEquals(new Double(0.0), ((Object[]) l.get(0))[1]);\n        assertEquals(new Double(1.0), ((Object[]) l.get(1))[1]);\n        assertEquals(new Double(2.1), ((Object[]) l.get(2))[1]);\n    }", "signature": "void testCreateStackedValueList1a()", "full_signature": "public void testCreateStackedValueList1a()", "class_method_signature": "StackedBarRenderer3DTests.testCreateStackedValueList1a()", "testcase": true, "constructor": false, "invocations": ["addValue", "addValue", "createStackedValueList", "assertEquals", "size", "assertEquals", "get", "assertEquals", "get", "assertEquals", "get"]}, "focal_class": {"identifier": "StackedBarRenderer3D", "superclass": "extends BarRenderer3D", "interfaces": "implements Cloneable, PublicCloneable, Serializable", "fields": [{"original_string": "private static final long serialVersionUID = -5832945916493247123L;", "modifier": "private static final", "type": "long", "declarator": "serialVersionUID = -5832945916493247123L", "var_name": "serialVersionUID"}, {"original_string": "private boolean renderAsPercentages;", "modifier": "private", "type": "boolean", "declarator": "renderAsPercentages", "var_name": "renderAsPercentages"}, {"original_string": "private boolean ignoreZeroValues;", "modifier": "private", "type": "boolean", "declarator": "ignoreZeroValues", "var_name": "ignoreZeroValues"}], "methods": [{"identifier": "StackedBarRenderer3D", "parameters": "()", "modifiers": "public", "return": "", "signature": " StackedBarRenderer3D()", "full_signature": "public  StackedBarRenderer3D()", "class_method_signature": "StackedBarRenderer3D.StackedBarRenderer3D()", "testcase": false, "constructor": true}, {"identifier": "StackedBarRenderer3D", "parameters": "(double xOffset, double yOffset)", "modifiers": "public", "return": "", "signature": " StackedBarRenderer3D(double xOffset, double yOffset)", "full_signature": "public  StackedBarRenderer3D(double xOffset, double yOffset)", "class_method_signature": "StackedBarRenderer3D.StackedBarRenderer3D(double xOffset, double yOffset)", "testcase": false, "constructor": true}, {"identifier": "StackedBarRenderer3D", "parameters": "(boolean renderAsPercentages)", "modifiers": "public", "return": "", "signature": " StackedBarRenderer3D(boolean renderAsPercentages)", "full_signature": "public  StackedBarRenderer3D(boolean renderAsPercentages)", "class_method_signature": "StackedBarRenderer3D.StackedBarRenderer3D(boolean renderAsPercentages)", "testcase": false, "constructor": true}, {"identifier": "StackedBarRenderer3D", "parameters": "(double xOffset, double yOffset,\n            boolean renderAsPercentages)", "modifiers": "public", "return": "", "signature": " StackedBarRenderer3D(double xOffset, double yOffset,\n            boolean renderAsPercentages)", "full_signature": "public  StackedBarRenderer3D(double xOffset, double yOffset,\n            boolean renderAsPercentages)", "class_method_signature": "StackedBarRenderer3D.StackedBarRenderer3D(double xOffset, double yOffset,\n            boolean renderAsPercentages)", "testcase": false, "constructor": true}, {"identifier": "getRenderAsPercentages", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean getRenderAsPercentages()", "full_signature": "public boolean getRenderAsPercentages()", "class_method_signature": "StackedBarRenderer3D.getRenderAsPercentages()", "testcase": false, "constructor": false}, {"identifier": "setRenderAsPercentages", "parameters": "(boolean asPercentages)", "modifiers": "public", "return": "void", "signature": "void setRenderAsPercentages(boolean asPercentages)", "full_signature": "public void setRenderAsPercentages(boolean asPercentages)", "class_method_signature": "StackedBarRenderer3D.setRenderAsPercentages(boolean asPercentages)", "testcase": false, "constructor": false}, {"identifier": "getIgnoreZeroValues", "parameters": "()", "modifiers": "public", "return": "boolean", "signature": "boolean getIgnoreZeroValues()", "full_signature": "public boolean getIgnoreZeroValues()", "class_method_signature": "StackedBarRenderer3D.getIgnoreZeroValues()", "testcase": false, "constructor": false}, {"identifier": "setIgnoreZeroValues", "parameters": "(boolean ignore)", "modifiers": "public", "return": "void", "signature": "void setIgnoreZeroValues(boolean ignore)", "full_signature": "public void setIgnoreZeroValues(boolean ignore)", "class_method_signature": "StackedBarRenderer3D.setIgnoreZeroValues(boolean ignore)", "testcase": false, "constructor": false}, {"identifier": "findRangeBounds", "parameters": "(CategoryDataset dataset)", "modifiers": "public", "return": "Range", "signature": "Range findRangeBounds(CategoryDataset dataset)", "full_signature": "public Range findRangeBounds(CategoryDataset dataset)", "class_method_signature": "StackedBarRenderer3D.findRangeBounds(CategoryDataset dataset)", "testcase": false, "constructor": false}, {"identifier": "calculateBarWidth", "parameters": "(CategoryPlot plot,\n                                     Rectangle2D dataArea,\n                                     CategoryDataset dataset,\n                                     CategoryItemRendererState state)", "modifiers": "protected", "return": "void", "signature": "void calculateBarWidth(CategoryPlot plot,\n                                     Rectangle2D dataArea,\n                                     CategoryDataset dataset,\n                                     CategoryItemRendererState state)", "full_signature": "protected void calculateBarWidth(CategoryPlot plot,\n                                     Rectangle2D dataArea,\n                                     CategoryDataset dataset,\n                                     CategoryItemRendererState state)", "class_method_signature": "StackedBarRenderer3D.calculateBarWidth(CategoryPlot plot,\n                                     Rectangle2D dataArea,\n                                     CategoryDataset dataset,\n                                     CategoryItemRendererState state)", "testcase": false, "constructor": false}, {"identifier": "createStackedValueList", "parameters": "(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "modifiers": "protected", "return": "List", "signature": "List createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "full_signature": "protected List createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "class_method_signature": "StackedBarRenderer3D.createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "testcase": false, "constructor": false}, {"identifier": "drawItem", "parameters": "(Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,\n            ValueAxis rangeAxis, CategoryDataset dataset, int row, int column,\n            boolean selected, int pass)", "modifiers": "public", "return": "void", "signature": "void drawItem(Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,\n            ValueAxis rangeAxis, CategoryDataset dataset, int row, int column,\n            boolean selected, int pass)", "full_signature": "public void drawItem(Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,\n            ValueAxis rangeAxis, CategoryDataset dataset, int row, int column,\n            boolean selected, int pass)", "class_method_signature": "StackedBarRenderer3D.drawItem(Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot, CategoryAxis domainAxis,\n            ValueAxis rangeAxis, CategoryDataset dataset, int row, int column,\n            boolean selected, int pass)", "testcase": false, "constructor": false}, {"identifier": "drawStackHorizontal", "parameters": "(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "modifiers": "protected", "return": "void", "signature": "void drawStackHorizontal(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "full_signature": "protected void drawStackHorizontal(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "class_method_signature": "StackedBarRenderer3D.drawStackHorizontal(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "testcase": false, "constructor": false}, {"identifier": "createHorizontalBlock", "parameters": "(double x0, double width, double y0,\n            double y1, boolean inverted)", "modifiers": "private", "return": "Shape[]", "signature": "Shape[] createHorizontalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "full_signature": "private Shape[] createHorizontalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "class_method_signature": "StackedBarRenderer3D.createHorizontalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "testcase": false, "constructor": false}, {"identifier": "drawStackVertical", "parameters": "(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "modifiers": "protected", "return": "void", "signature": "void drawStackVertical(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "full_signature": "protected void drawStackVertical(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "class_method_signature": "StackedBarRenderer3D.drawStackVertical(List values, Comparable category,\n            Graphics2D g2, CategoryItemRendererState state,\n            Rectangle2D dataArea, CategoryPlot plot,\n            CategoryAxis domainAxis, ValueAxis rangeAxis,\n            CategoryDataset dataset)", "testcase": false, "constructor": false}, {"identifier": "createVerticalBlock", "parameters": "(double x0, double width, double y0,\n            double y1, boolean inverted)", "modifiers": "private", "return": "Shape[]", "signature": "Shape[] createVerticalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "full_signature": "private Shape[] createVerticalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "class_method_signature": "StackedBarRenderer3D.createVerticalBlock(double x0, double width, double y0,\n            double y1, boolean inverted)", "testcase": false, "constructor": false}, {"identifier": "equals", "parameters": "(Object obj)", "modifiers": "public", "return": "boolean", "signature": "boolean equals(Object obj)", "full_signature": "public boolean equals(Object obj)", "class_method_signature": "StackedBarRenderer3D.equals(Object obj)", "testcase": false, "constructor": false}, {"identifier": "hashCode", "parameters": "()", "modifiers": "public", "return": "int", "signature": "int hashCode()", "full_signature": "public int hashCode()", "class_method_signature": "StackedBarRenderer3D.hashCode()", "testcase": false, "constructor": false}], "file": "source/org/jfree/chart/renderer/category/StackedBarRenderer3D.java"}, "focal_method": {"identifier": "createStackedValueList", "parameters": "(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "modifiers": "protected", "return": "List", "body": "protected List createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages) {\n\n        List result = new ArrayList();\n        double posBase = base;\n        double negBase = base;\n        double total = 0.0;\n        if (asPercentages) {\n            total = DataUtilities.calculateColumnTotal(dataset,\n                    dataset.getColumnIndex(category), includedRows);\n        }\n\n        int baseIndex = -1;\n        int rowCount = includedRows.length;\n        for (int i = 0; i < rowCount; i++) {\n            int r = includedRows[i];\n            Number n = dataset.getValue(dataset.getRowKey(r), category);\n            if (n == null) {\n                continue;\n            }\n            double v = n.doubleValue();\n            if (asPercentages) {\n                v = v / total;\n            }\n            if ((v > 0.0) || (!this.ignoreZeroValues && v >= 0.0)) {\n                if (baseIndex < 0) {\n                    result.add(new Object[] {null, new Double(base)});\n                    baseIndex = 0;\n                }\n                posBase = posBase + v;\n                result.add(new Object[] {new Integer(r), new Double(posBase)});\n            }\n            else if (v < 0.0) {\n                if (baseIndex < 0) {\n                    result.add(new Object[] {null, new Double(base)});\n                    baseIndex = 0;\n                }\n                negBase = negBase + v; // '+' because v is negative\n                result.add(0, new Object[] {new Integer(-r - 1),\n                        new Double(negBase)});\n                baseIndex++;\n            }\n        }\n        return result;\n\n    }", "signature": "List createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "full_signature": "protected List createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "class_method_signature": "StackedBarRenderer3D.createStackedValueList(CategoryDataset dataset,\n            Comparable category, int[] includedRows, double base,\n            boolean asPercentages)", "testcase": false, "constructor": false, "invocations": ["calculateColumnTotal", "getColumnIndex", "getValue", "getRowKey", "doubleValue", "add", "add", "add", "add"]}, "repository": {"repo_id": "Chart_1_buggy"}}